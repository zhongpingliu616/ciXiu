# 实现用户数据持久化

## 目标
解决浏览器刷新后 Pinia Store 中用户信息丢失的问题，确保用户登录状态和个人信息在刷新后依然保持。

## 实施步骤

### 1. 修改 `pages/login.vue` (登录页面)
在登录成功后，除了保存 Token，还需要将完整的用户信息保存到本地缓存中。
- **绣娘端登录成功后**：执行 `uni.setStorageSync('userInfoXn', ...)` 保存用户信息对象。
- **公众端登录成功后**：执行 `uni.setStorageSync('userInfoGz', ...)` 保存用户信息对象。

### 2. 修改 `stores/userLogin.js` (Pinia Store)
在 Store 初始化时，优先从本地缓存中读取数据。
- **初始化 `userInfoXn`**：尝试读取 `uni.getStorageSync('userInfoXn')`，如果有值则合并/覆盖默认值，同时确保 Token 从 `uni.getStorageSync('tokenXn')` 或用户信息中正确获取。
- **初始化 `userInfoGz`**：同上，读取 `uni.getStorageSync('userInfoGz')`。

这样修改后，刷新页面时 Store 会自动从本地缓存加载之前保存的数据，从而保持登录状态。